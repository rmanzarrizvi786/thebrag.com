
jQuery(function(h){var c=[{element:h(".post-listing"),action:"td_ajax_load_more"},{element:h(".cat-post-listing"),action:"td_ajax_load_more_cat_posts"},{element:h(".freeshit-post-listing"),action:"td_ajax_load_more_freeshit_posts"},{element:h(".venue-blocks"),action:"td_ajax_load_more_venues"},{element:h("#post-artist-listing"),action:"ssm_ajax_load_more_artist_posts"}];var m,q;var f=document.location.href;var l=f.match(new RegExp("/page/([0-9]+)"),"");var n=l!=null?l[1]:0;var e=f.match(new RegExp("/l/(.*)"),"");var p=e!=null?e[1]:"_";f=f.replace(new RegExp("/page/([0-9]+)"),"");var b=true;if(b){for(var g=0;g<c.length;g++){m=c[g].element;q=c[g].action;if(m.length){m.append('<div class="load-more"><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div>');var j=m.find(".load-more");var k=parseInt(n)+1;var a=false;var d={allow:true,reallow:function(){d.allow=true},delay:400};break}}}h(window).scroll(function(){if(m.length&&!a&&d.allow){d.allow=false;setTimeout(d.reallow,d.delay);var r=h(j).offset().top-h(window).scrollTop();if(2000>r){a=true;var i={action:q,page:k,l:p,query:tdloadmore.query,exclude_posts:tdloadmore.exclude_posts,post_type:"post",is_home:tdloadmore.is_home,is_cat:tdloadmore.is_cat};h.post(tdloadmore.url,i,function(s){if(s.success&&s.data){m.append(s.data);m.append(j);page_url=f+"page/"+k+"/";page_title=document.title+" - Page "+k;window.history.pushState(null,page_title,page_url);k=k+1;a=false}else{b=false;j.remove()}}).fail(function(t,u,s){console.log(t.responseText)})}}});if(m.length&&h(".col-right-sticky").length&&m.height()>h(".col-right-sticky").height()){var o=window_height-h(".col-right-sticky").outerHeight();h(window).scroll(function(){if(window_width>=768){var v=h("#header").outerHeight()+h("#ad-leaderboard").outerHeight()+h("#section-hero").outerHeight()+60-h(window).height();var r=h("#main").outerWidth();var s=h(window).outerWidth();var u=(s-r)/2;var t=v+h(".col-right-sticky").outerHeight()+40;var i=h(window).scrollTop();if(i>=t){h(".col-right-sticky").addClass("stick")}else{h(".col-right-sticky").removeClass("stick")}}})}});