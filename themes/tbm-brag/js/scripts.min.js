jQuery(document).ready(function(e){if(e(".btn-toggle-slidedown").on("click",function(){if(e(this).data("target")){var t=e("#"+e(this).data("target"));t.hasClass("slidedown-active")?(t.removeClass("slidedown-active"),e("#overlay").addClass("d-none"),e("body").removeClass("modal-open"),t.slideUp()):(e(".slidedown-active").removeClass("slidedown-active").hide(),t.slideDown().addClass("slidedown-active"),e("#overlay").removeClass("d-none"),e("body").addClass("modal-open"))}}),e(".btn-toggle-network-mobile").on("click",function(){e(this).toggleClass("active"),e("#network-mobile").slideToggle(),e("#search-nav-wrap").slideToggle()}),e("#overlay").on("click",function(){e(this).addClass("d-none"),e("body").removeClass("modal-open"),e(".slidedown-active").removeClass("slidedown-active").hide(),e(".nav-wrap").removeClass("active"),e(".modal").hide()}),e(".btn-toggle-menu").on("click",function(){e(".nav-wrap").addClass("active"),e("#overlay").removeClass("d-none"),e("body").addClass("modal-open")}),e(".btn-close-menu").on("click",function(){e(".nav-wrap").removeClass("active"),e("#overlay").addClass("d-none"),e("body").removeClass("modal-open")}),e('[data-toggle="modal"]').on("click",function(t){t.preventDefault();var a=e(e(this).data("target"));e("body").addClass("modal-open"),e("#overlay").removeClass("d-none"),a.fadeIn()}),e(".modal .close").on("click",function(t){t.preventDefault(),e(this).closest(".modal").fadeOut(),e("#overlay").addClass("d-none"),e("body").removeClass("modal-open")}),e(".btn-open-top-search").on("click",function(){e("#top-search-wrap").addClass("active")}),e(".btn-close-top-search").on("click",function(){e("#top-search-wrap").removeClass("active")}),768>e(window).width()&&e(document).on("click",".nav-v .toggle-nav, .nav-v.collapsed .active",function(t){t.preventDefault(),e(this).closest(".nav-v").toggleClass("collapsed").find("li").toggleClass("open")}),e(".observer-list .topics-active a").on("click",function(t){if(t.preventDefault(),e(this).hasClass("subscribed"))var a="unsubscribed";else var a="subscribed";var o=e(this).data("list");e.post(brag_observer.url,{action:"subscribe_observer",formData:"list="+o+"&status="+a},function(t){t.success&&e("a[data-list="+o+"]").toggleClass("subscribed")})}),e("body").on("click",".yt-lazy-load",function(){var t,a=e(this).data("id"),o=e(this).prop("id"),s=e(this).height();t=new YT.Player(o,{height:s,videoId:a,events:{onReady:function e(t){t.target.playVideo()}}})}),e(".l_video").on("click",function(t){t.preventDefault();var a=e(this).data("youtube");e("#tb-video-modal .modal-body").html(""),e("#tb-video-modal .modal-body").html('<iframe width="560" height="349" src="http://www.youtube.com/embed/'+a+'?rel=0&autoplay=1&color=white" frameborder="0" allowfullscreen ></iframe>'),e("#tb-video-modal").modal("show")}),e("#tb-video-modal").on("hidden.bs.modal",function(){e("#tb-video-modal .modal-body").html("")}),e(".datepicker").length&&e(".datepicker").datepicker({format:"dd M yyyy"}),e("body").on("click",".social-share-link",function(t){return t.preventDefault(),window.open(e(this).attr("href"),e(this).data("type"),"height=450, width=550, top="+(e(window).height()/2-225)+", left="+(e(window).width()/2-275)+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0"),!1}),e("#articles-wrap").length){e("#articles-wrap").append('<div class="load-more">Loading...</div>');var t=e("#articles-wrap .load-more"),a=!1,o={allow:!0,reallow:function(){o.allow=!0},delay:400},s=2}var i=0,l=e(window).scrollTop(),n=document.title,r=document.location.protocol+"//"+document.location.host+document.location.pathname,d=e(".single-article"),c=e.grep(d,function(t){return e(t).position().top<=l+10}),h=e.grep(d,function(t){return e(t).position().top<=l+e(window).height()-e("#header").outerHeight()}),f=e(window).height();e(window).scroll(function(){if(l=e(this).scrollTop(),768>e(window).width()&&(e("main").length&&e("main").offset().top,e(".ad-billboard-top").length&&e(".ad-billboard-top").height(),l>=e(window).height()/2&&e(".ad-billboard-top").addClass("sticky").slideDown()),e(".single").length){if(e("#articles-wrap").length&&s<4){if(e(".featured.single-article-1","#articles-wrap").length>1)return;if(!a&&o.allow){o.allow=!1,setTimeout(o.reallow,o.delay);var p=e(t).offset().top-e(window).scrollTop()-e(window).outerHeight();if(1.5*f>p){a=!0;var u={action:"tbm_ajax_load_next_post",exclude_posts:tbm_load_next_post.exclude_posts,id:tbm_load_next_post.current_post,count_articles:s};e.post(tbm_load_next_post.url,u,function(o){if(o.success){"undefined"!=o.data.page_title&&s++,tbm_load_next_post.current_post=o.data.loaded_post,tbm_load_next_post.exclude_posts+=","+o.data.loaded_post,e("#articles-wrap").append(o.data.content),e("#articles-wrap").append(t),fusetag.setTargeting("fuse_category",["'"+o.data.category+"'",]);var i=fusetag.getAdSlotsById("22339226185");if(void 0!==i){var l=i[0].getResponseInformation();void 0!==l&&void 0!==l.lineItemId&&fusetag.setTargeting("LineItemId",["'"+l.lineItemId+"'",])}fusetag.setTargeting("pagepath",["'"+o.data.pagepath+"'",]),a=!1}else t.remove()}).fail(function(e,t,a){})}}}else void 0!==t&&t.remove();if(void 0!==t){if(d=e(".single-article"),c=e.grep(d,function(t){return e(t).position().top<=l+100}),h=e.grep(d,function(t){return e(t).position().top<=l+e(window).height()/2}),""!=e(h).last().prop("id")){var v=1-((i=e(h).last().offset().top+e(h).last().outerHeight()-30)-l-e(window).height())/e(h).last().outerHeight();v<0?v=0:v>1&&(v=1)}if(""!=e(h).last().find("h1").text()&&r!=e(h).last().find("h1").data("href")){page_title_html=e(h).last().find("h1").data("title"),n=e("<textarea />").html(page_title_html).text(),r=e(h).last().find("h1").data("href");var m=e(h).last().find(".author").data("author"),g=e(h).last().find(".cats").data("category"),b=e(h).last().find(".cats").data("tags"),w=e(h).last().find("time").data("pubdate");window.dataLayer=window.dataLayer||[],window.dataLayer.push({AuthorCD:m,CategoryCD:g,TagsCD:b,PubdateCD:w}),document.title=n,window.history.pushState(null,n,r),article_number=e(h).last().find("h1").data("article-number")}}if(e(h).last().find(".observer-sub-form").length){var y=e(h).last().find(".observer-sub-form");y.closest("blockquote").length>0&&y.detach(),e(window).scrollTop()<y.offset().top+y.outerHeight()-e(window).height()/2&&e(window).scrollTop()+e(window).innerHeight()>y.offset().top+e(window).height()/2?y.closest(".single-article").find(".overlay").first().fadeIn():y.closest(".single-article").find(".overlay").first().fadeOut()}e(".single-article .overlay").length&&e(".single-article .overlay").on("click",function(){e(this).remove()})}}),e(".btn-join").length&&e(document).on("click",".btn-join",function(){768>e(window).width()&&e(this).closest(".observer-sub-form").find(".img-wrap").first().hide();var t=e(this).next("form.observer-subscribe-form");t.removeClass("d-none"),t.find('input[name="email"]').focus(),e(this).remove()}),e(document).on("submit",".observer-subscribe-form",function(t){t.preventDefault();var a=e(this);if(a.find('input[name="email"]').length&&(""==a.find('input[name="email"]').val()||!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(a.find('input[name="email"]').val().toLowerCase()))))return a.parent().find(".js-errors-subscribe").html("Please enter a valid email address.").removeClass("d-none"),!1;var o=e(this).serialize(),s=e(this).find(".loading"),i=e(this).find(".button");o+="&source="+a.closest(".single-article").find("h1:first").data("href"),e(".js-errors-subscribe,.js-msg-subscribe").html("").addClass("d-none"),s.show(),i.hide();var l={action:"subscribe_observer_category",formData:o};e.post(tbm_load_next_post.url,l,function(e){e.success?(a.parent().find(".js-msg-subscribe").html(e.data.message).removeClass("d-none"),a.hide()):(a.parent().find(".js-errors-subscribe").html(e.data.error.message).removeClass("d-none"),i.show()),s.hide()}).error(function(){a.parent().find(".js-errors-subscribe").html("Something went wrong, please try again later").removeClass("d-none"),s.hide(),i.show()})})});